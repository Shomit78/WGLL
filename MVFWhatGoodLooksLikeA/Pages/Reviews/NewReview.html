<form id="wgll-review-form">
    <div class="input-group">
        <input class="btn" type="button" value="Cancel" ng-click="goTo('/')" />
        <input class="btn wgll-button-disabled" type="button" value="Save" ng-click="save()" disabled="" />
        <input class="btn wgll-button-disabled wgll-button-submit-disabled" type="button" value="Submit" ng-click="submit()" disabled="" />
    </div>
    <div id="wgllSubsetContainer{{ $index }}" class="form-group wgll-subset-container clearfix" ng-repeat="subset in subsets" ng-hide="!$first">
        <div class="input-group pull-right">
            <input class="btn" type="button" value="Back" ng-click="moveBack('wgllSubsetContainer'+$index, $index)" ng-disabled="$first" />
            <input class="btn" type="button" value="Next" ng-click="moveNext('wgllSubsetContainer'+$index, $index)" ng-disabled="$last" />
        </div>
        <h3>
            <span class="wgll-subset-order-span">{{ $index + 1}}).</span>&#160;
            <span class="wgll-subset-title-span">{{ subset.title }}</span>
        </h3>
        <p ng-bind-html="subset.detail"></p>
        <div class="form-group wgll-criteria-container" ng-repeat="criteria in subset.criteria" title="{{ subset.title }}" subtitle="{{ criteria.title }}">
            <label for="wgllresultcheckbox{{ $index }}" title="{{ criteria.title }}" class="wgll-criteria-title-label" order="{{ criteria.order }}" nonnegotiable="{{ criteria.nonNegotiable }}">{{ criteria.title }}</label>
            <div class="form-group checkbox pull-right" title="{{ criteria.title }}">
                <label class="checkbox-inline" for="wgllResultCheckbox{{ $parent.$index }}{{ $index }}">
                    <input id="wgllResultCheckbox{{ $parent.$index }}{{ $index }}" ng-model="passed" class="wgll-checkbox-result wgll-checkbox-result-pass" type="checkbox"
                           ng-click="toggleFail('wgllResultCheckboxFail'+$parent.$index+$index, passed, 'wgllTextAreaDiv'+$parent.$index+$index)">&nbsp;Pass
                </label>
                <label class="checkbox-inline" for="wgllResultCheckboxFail{{ $parent.$index }}{{ $index }}">
                    <input id="wgllResultCheckboxFail{{ $parent.$index }}{{ $index }}" class="wgll-checkbox-result wgll-checkbox-result-fail" type="checkbox" ng-model="failed"
                           ng-click="togglePass('wgllResultCheckbox'+$parent.$index+$index, failed, 'wgllTextAreaDiv'+$parent.$index+$index)">&nbsp;Fail
                </label>
            </div>
            <a ng-click="showFurtherGuidance('wgllFurtherGuidanceDiv'+$parent.$index+$index, criteria.id)" class="wgll-store-guidance-link" title="View further guidance for {{ currentUsersStore }} on this criteria">
                <span style="width: 20px; height: 17px; overflow: hidden; display: inline-block; position: relative;">
                    <img src="/_layouts/15/images/spcommon.png?rev=1" style="left: -194px; top: -173px; position: absolute;" alt="Refresh current Reviews image" />
                </span>
            </a>
            <div class="form-group wgll-criteria-detail-container" ng-bind-html="criteria.detail"></div>
            <div class="form-group wgll-rounded-border bg-info wgll-criteria-further-guidance hide" id="wgllFurtherGuidanceDiv{{$parent.$index}}{{$index}}">
                <p style="text-align:center">
                    <img src="/_layouts/15/images/loading16.gif?rev=1" alt="loading criteria further guidance image" />
                </p>
            </div>
            <div class="form-group hide clearfix bg-warning wgll-reason-for-failure-container wgll-rounded-border" id="wgllTextAreaDiv{{ $parent.$index }}{{ $index }}" title="{{ criteria.title }}">
                <label for="wgllTextArea{{ $index }}">Reason for failure</label>
                <textarea name="wgllReasonForFailure{{$index}}" id="wgllTextArea{{ $index }}" ng-required="true" class="form-control wgll-criteria-reason-for-failure-textarea" rows="2" ng-model="criteria.reasonforfailuretext" placeholder="Enter a reason for the failure here..."></textarea>
                <div class="required pull-right" ng-hide="criteria.checked">
                    <span class="error">* This field is required</span>
                </div>
            </div>
            <div class="form-group bg-info wgll-rounded-border hide" >
                <h5>Images
                    <a href="" ng-click="showUploadImage('wgllUploadImage'+$parent.$index+$index)" class="pull-right" title="Add an image">
                        <span style="width: 20px; height: 20px; overflow: hidden; display: inline-block; position: relative;">
                            <img src="/_layouts/15/images/spcommon.png?rev=1" style="left: -131px; top: -134px; position: absolute;" alt="Refresh current Reviews image" />
                        </span>
                    </a>                
                </h5>
                <div></div>
                <div id="wgllUploadImage{{$parent.$index}}{{$index}}" class="form-group bg-warning clearfix hide wgll-rounded-border">
                    <h6>Upload an image</h6>
                    <input class="form-control" id="wgllFile{{$parent.$index}}{{$index}}" type="file" /><br />
                    <input class="form-control" id="wgllFileDisplayName{{$parent.$index}}{{$index}}" type="text" value="Enter a unique name" /><br />
                    <input class="btn pull-right" id="wgllFileAdd{{$parent.$index}}{{$index}}" type="button" value="Upload" ng-click="uploadImage('wgllFileAdd'+$parent.$index+$index,'wgllFile'+$parent.$index+$index)" />
                </div>
            </div>
        </div>
        <div class="input-group pull-right">
            <input class="btn" type="button" value="Back" ng-click="moveBack('wgllSubsetContainer'+$index, $index)" ng-disabled="$first" />
            <input class="btn" type="button" value="Next" ng-click="moveNext('wgllSubsetContainer'+$index, $index)" ng-disabled="$last" />
        </div>
    </div>
    <div class="form-group" ng-repeat-end>
        <div class="form-group">
            <label for="wgllReviewVisitSummaryTextarea">Visit Summary</label>
            <textarea id="wgllReviewVisitSummaryTextarea" class="form-control" rows="10" placeholder="Enter a summary of the visit here..."></textarea>
        </div>
        <div class="form-group">
            <label for="wgllReviewNotesTextarea">Notes</label>
            <textarea id="wgllReviewNotesTextarea" class="form-control" placeholder="Enter any review notes here..."></textarea>
        </div>
    </div>
    <div class="input-group">
        <input class="btn" type="button" value="Cancel" ng-click="goTo('/')" />
        <input class="btn wgll-button-disabled" type="button" value="Save" ng-click="save()" disabled="" />
        <input class="btn wgll-button-disabled wgll-button-submit-disabled" type="button" value="Submit" ng-click="submit()" disabled="" />
    </div>
</form>